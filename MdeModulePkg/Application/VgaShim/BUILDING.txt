sudo apt-get install uuid-dev nasm tofrodos
ln -s /media/sf_Desktop ~/host
mkdir ~/UDK2014
cd ~/UDK2014
wget http://netcologne.dl.sourceforge.net/project/edk2/UDK2014_Releases/UDK2014.SP1.P1/UDK2014.SP1.P1.Complete.MyWorkSpace.zip
unzip UDK2014.SP1.P1.Complete.MyWorkSpace.zip
rm UDK2014.SP1.P1.Complete.MyWorkSpace.zip
unzip UDK2014.SP1.P1.MyWorkSpace.zip
rm UDK2014.SP1.P1.MyWorkSpace.zip
cd MyWorkSpace/
tar xvf ../BaseTools\(Unix\).tar
source edksetup.sh BaseTools

vim ~/.bashrc
# add at the end: alias udk='cd ~/UDK2014/MyWorkSpace && source edksetup.sh BaseTools'

vim Conf/target.txt
# TOOL_CHAIN_TAG = GCC49
# TARGET_ARCH = X64
# ACTIVE_PLATFORM = MdeModulePkg/MdeModulePkg.dsc

# useful for development
vim Conf/toos_def.txt
# add to GCC49_IA32_CC_FLAGS(3904): -Wno-unused-variable
# add to GCC49_X64_CC_FLAGS(3905): -Wno-unused-variable

make -C BaseTools/Source/C
build

# copy VgaShim to MdeModulePkg/Application
vim MdeModulePkg/MdeModulePkg.dsc
# add MdeModulePkg/Application/VgaShim/VgaShim.inf around line 198
build && cp Build/MdeModule/DEBUG_GCC49/X64/VgaShim.efi ~/host

# enable debugging
# MdePkg/MdePkg.dsc:32 change PcdDebugPrintErrorLevel to 0xffffffff
# MdePkg/MdePkg.dec:1931 change PcdDebugPrintErrorLevel to 0xffffffff
vim MdeModulePkg/MdeModulePkg.dsc
# [LibraryClasses] add CpuLib|MdePkg/Library/BaseCpuLib/BaseCpuLib.inf
# [LibraryClasses] add MtrrLib|UefiCpuPkg/Library/MtrrLib/MtrrLib.inf
# [LibraryClasses.common.UEFI_APPLICATION] change DebugLib to DebugLib|MdePkg/Library/UefiDebugLibConOut/UefiDebugLibConOut.inf